@model MVC_project.ViewModels.UserDetailsViewModel

<style>
    .modal.show .modal-dialog .modal-content {
        border-radius: 1.5rem;
        border: none;
    }

    .user-modal-header {
        background: linear-gradient(135deg, #6366f1 0%, #3730a3 100%);
        color: white;
        border: none;
        padding: 1.5rem;
        border-radius: 1.5rem 1.5rem 0 0;
    }

    .user-modal-header .modal-title {
        font-weight: 700;
        font-size: 1.25rem;
    }

    .user-modal-header .btn-close {
        filter: brightness(0) invert(1);
    }

    .user-modal-body {
        background: #ffffff;
        padding: 1.5rem;
    }

    .user-info-card {
        background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
        border: 1px solid #bae6fd;
        border-radius: 0.75rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .user-info-card .label {
        color: #0c4a6e;
        font-size: 0.875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .user-info-card .value {
        color: #1e293b;
        font-weight: 700;
        font-size: 1.1rem;
        margin-top: 0.25rem;
    }

    .bookings-table {
        border-collapse: collapse;
        width: 100%;
    }

    .bookings-table thead th {
        background: linear-gradient(135deg, #eef2ff, #e0e7ff);
        color: #1e293b;
        font-weight: 600;
        padding: 0.75rem;
        text-align: left;
        border-bottom: 2px solid #bae6fd;
    }

    .bookings-table tbody td {
        padding: 0.75rem;
        border-bottom: 1px solid #e2e8f0;
        color: #475569;
    }

    .bookings-table tbody tr:hover {
        background: #f8fafc;
    }

    .user-modal-footer {
        background: #f8fafc;
        border-top: 1px solid #e2e8f0;
        padding: 1rem 1.5rem;
        border-radius: 0 0 1.5rem 1.5rem;
        display: flex;
        gap: 0.75rem;
        justify-content: flex-end;
    }

    .btn-action {
        padding: 0.5rem 1rem;
        border-radius: 0.6rem;
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
    }

    .btn-delete {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        box-shadow: 0 6px 20px rgba(239, 68, 68, 0.35);
    }

    .btn-delete:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(239, 68, 68, 0.5);
        color: white !important;
    }

    .btn-edit {
        background: linear-gradient(135deg, #6366f1 0%, #3730a3 100%);
        color: white;
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
    }

    .btn-edit:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(99, 102, 241, 0.5);
        color: white !important;
    }

    .btn-close-modal {
        background: #e2e8f0;
        color: #1e293b;
        border: none;
    }

    .btn-close-modal:hover {
        background: #cbd5e1;
        color: #1e293b !important;
    }
</style>

<div class="user-modal-header">
    <h5 class="modal-title">
        <i class="bi bi-person-circle me-2"></i>
        @(string.IsNullOrWhiteSpace(Model.User.first_name) && string.IsNullOrWhiteSpace(Model.User.last_name)
            ? Model.User.email
            : $"{Model.User.first_name} {Model.User.last_name}")
    </h5>
    <p class="text-white-50 mt-2 mb-0" style="font-size: 0.9rem;">@Model.User.email</p>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="user-modal-body">
    <div class="row g-2 mb-3">
        <div class="col-md-6">
            <div class="user-info-card">
                <div class="label"><i class="bi bi-shield-check me-1"></i> Role</div>
                <div class="value">@(Model.User.admin ? "ðŸ‘‘ Admin" : "ðŸ‘¤ User")</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="user-info-card">
                <div class="label"><i class="bi bi-bookmark-fill me-1"></i> Bookings</div>
                <div class="value">@Model.Bookings.Count</div>
            </div>
        </div>
    </div>

    <h6 style="color: #1e293b; font-weight: 700; margin-top: 1.5rem; margin-bottom: 1rem;">
        <i class="bi bi-list-check me-2"></i>Booking History
    </h6>

    <div class="table-responsive">
        <table class="bookings-table">
            <thead>
                <tr>
                    <th>Destination</th>
                    <th>Country</th>
                    <th>Dates</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Bookings.Any())
                {
                    foreach (var b in Model.Bookings)
                    {
                        var t = b.Trip;
                        <tr>
                            <td>@t?.Destination</td>
                            <td>@t?.Country</td>
                            <td>@(t != null ? $"{t.StartDate:MMM dd} - {t.EndDate:MMM dd}" : "â€”")</td>
                            <td style="font-weight: 600; color: #6366f1;">$@(t?.DiscountPrice ?? t?.Price)</td>
                        </tr>
                    }
                }
                else
                {
                    <tr><td colspan="4" class="text-center text-muted py-3">No bookings for this user.</td></tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="user-modal-footer">
    <button type="button" class="btn btn-action btn-delete" id="btnDeleteUser" data-email="@Model.User.email">
        <i class="bi bi-trash me-2"></i> Delete User
    </button>
    <button type="button" class="btn btn-action btn-edit" id="btnEditUser" data-email="@Model.User.email">
        <i class="bi bi-pencil me-2"></i> Edit User
    </button>
    <button type="button" class="btn btn-action btn-close-modal" data-bs-dismiss="modal">
        <i class="bi bi-x-lg me-2"></i> Close
    </button>
</div>

